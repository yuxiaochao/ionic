<ion-header>

  <ion-navbar>
    <ion-title>好友聊天</ion-title>
    <span (click)="interflowdetail()" style="float:right;color:#fff;font-size:18px;">
      <ion-icon ios="ios-call-outline" md="ios-call-outline"></ion-icon>
      <ion-icon (click)="morePopover()" style="margin: 0 15px;" ios="ios-contact-outline"
                md="ios-contact-outline"></ion-icon>
    </span>
  </ion-navbar>

</ion-header>


<ion-content style="background:rgba(242,246,249,1);">
  <div class="box_hd" [hidden]="!box_hd_isShow">没有更多消息了</div>
  <ion-infinite-scroll position="top" threshold="1px" (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content
      loadingSpinner="crescent"
      loadingText="加载更多数据...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>

  <div *ngFor="let item of items">
    <div class="chatTimeBox" *ngIf="item.theFirst">
      <div class="leftLine"></div>
      <div class="chatTime">{{item.sendingDate}}</div>
      <div class="rightLine"></div>
    </div>
    <div class="friendChat" *ngIf="item.type == 'me'">
      <div class="frdpoto">
        <img style="width:100%;height:100%;" [src]="item.portrait | coverHeadImpPath:item.sex" alt="">
      </div>
      <div class="chat" *ngIf="item.msgType=='txt'">
        <div class="sanjiao"></div>
        <pre><span [innerHTML]="item.msg"></span></pre>
      </div>
      <div class="chat" *ngIf="item.msgType=='audio'">
        <div class="sanjiao"></div>
        <pre><span [innerHTML]="item.msg"></span></pre>
        <audio style="width: 100%;" controls="controls" [src]="item.filepath"></audio>
      </div>
    </div>

    <div class="myChat" *ngIf="item.type != 'me'">
      <div class="mypoto"><img style="width:100%;height:100%;" [src]="item.portrait | coverHeadImpPath:item.sex" alt=""></div>
      <div class="mychat" *ngIf="item.msgType=='txt'">
        <div class="mysanjiao01"></div>
        <div class="mysanjiao02"></div>
        <pre><span [innerHTML]="item.msg"></span></pre>
      </div>
      <div class="mychat" *ngIf="item.msgType=='audio'">
        <div class="mysanjiao01"></div>
        <div class="mysanjiao02"></div>
        <pre><span [innerHTML]="item.msg"></span></pre>
        <audio style="width: 100%;" controls="controls" [src]="item.filepath"></audio>
      </div>
    </div>
  </div>
</ion-content>

<ion-footer class="myIonFooter">
  <ion-toolbar>
    <div class="box_ft">
      <div class="box_ft_bd" [class.hide]="!isOpenWechatFace">
        <div class="emoji_panel">
          <ul class="exp_hd">
            <li class="exp_hd_item" data-i="0" [class.active]="expHdItemNam == 1" (click)="cliExpHdItem(1)">
              <a href="javascript:;">QQ表情</a>
            </li>
            <li class="exp_hd_item" data-i="1" [class.active]="expHdItemNam == 2" (click)="cliExpHdItem(2)">
              <a href="javascript:;">符号表情</a>
            </li>
            <li class="exp_hd_item" data-i="2" [class.active]="expHdItemNam == 3" (click)="cliExpHdItem(3)">
              <a href="javascript:;">动画表情</a>
            </li>
          </ul>
          <div class="exp_bd">
            <div class="exp_cont" [class.active]="expHdItemNam == 1" #exp_cont>
              <a title="微笑" type="qq" class="qqface qqface0">微笑</a> <a title="撇嘴" type="qq"
                                                                       class="qqface qqface1">撇嘴</a>
              <a title="色" type="qq" class="qqface qqface2">色</a> <a title="发呆" type="qq"
                                                                     class="qqface qqface3">发呆</a> <a title="得意"
                                                                                                      type="qq"
                                                                                                      class="qqface qqface4">得意</a>
              <a title="流泪" type="qq" class="qqface qqface5">流泪</a> <a title="害羞" type="qq"
                                                                       class="qqface qqface6">害羞</a>
              <a title="闭嘴" type="qq" class="qqface qqface7">闭嘴</a> <a title="睡" type="qq"
                                                                       class="qqface qqface8">睡</a> <a title="大哭"
                                                                                                       type="qq"
                                                                                                       class="qqface qqface9">大哭</a>
              <a title="尴尬" type="qq" class="qqface qqface10">尴尬</a> <a title="发怒" type="qq"
                                                                        class="qqface qqface11">发怒</a> <a title="调皮"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface12">调皮</a>
              <a title="呲牙" type="qq" class="qqface qqface13">呲牙</a> <a title="惊讶" type="qq"
                                                                        class="qqface qqface14">惊讶</a> <a title="难过"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface15">难过</a>
              <a title="酷" type="qq" class="qqface qqface16">酷</a> <a title="冷汗" type="qq"
                                                                      class="qqface qqface17">冷汗</a>
              <a title="抓狂" type="qq" class="qqface qqface18">抓狂</a> <a title="吐" type="qq"
                                                                        class="qqface qqface19">吐</a>
              <a title="偷笑" type="qq" class="qqface qqface20">偷笑</a> <a title="愉快" type="qq"
                                                                        class="qqface qqface21">愉快</a> <a title="白眼"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface22">白眼</a>
              <a title="傲慢" type="qq" class="qqface qqface23">傲慢</a> <a title="饥饿" type="qq"
                                                                        class="qqface qqface24">饥饿</a> <a title="困"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface25">困</a>
              <a title="惊恐" type="qq" class="qqface qqface26">惊恐</a> <a title="流汗" type="qq"
                                                                        class="qqface qqface27">流汗</a> <a title="憨笑"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface28">憨笑</a>
              <a title="悠闲" type="qq" class="qqface qqface29">悠闲</a> <a title="奋斗" type="qq"
                                                                        class="qqface qqface30">奋斗</a> <a title="咒骂"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface31">咒骂</a>
              <a title="疑问" type="qq" class="qqface qqface32">疑问</a> <a title="嘘" type="qq"
                                                                        class="qqface qqface33">嘘</a>
              <a title="晕" type="qq" class="qqface qqface34">晕</a> <a title="疯了" type="qq"
                                                                      class="qqface qqface35">疯了</a>
              <a title="衰" type="qq" class="qqface qqface36">衰</a> <a title="骷髅" type="qq"
                                                                      class="qqface qqface37">骷髅</a>
              <a title="敲打" type="qq" class="qqface qqface38">敲打</a> <a title="再见" type="qq"
                                                                        class="qqface qqface39">再见</a> <a title="擦汗"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface40">擦汗</a>
              <a title="抠鼻" type="qq" class="qqface qqface41">抠鼻</a> <a title="鼓掌" type="qq"
                                                                        class="qqface qqface42">鼓掌</a> <a
              title="糗大了" type="qq" class="qqface qqface43">糗大了</a> <a title="坏笑" type="qq"
                                                                       class="qqface qqface44">坏笑</a>
              <a title="左哼哼" type="qq" class="qqface qqface45">左哼哼</a> <a title="右哼哼" type="qq"
                                                                          class="qqface qqface46">右哼哼</a> <a
              title="哈欠" type="qq" class="qqface qqface47">哈欠</a> <a title="鄙视" type="qq"
                                                                     class="qqface qqface48">鄙视</a> <a title="委屈"
                                                                                                       type="qq"
                                                                                                       class="qqface qqface49">委屈</a>
              <a title="快哭了" type="qq" class="qqface qqface50">快哭了</a> <a title="阴险" type="qq"
                                                                          class="qqface qqface51">阴险</a> <a
              title="亲亲" type="qq" class="qqface qqface52">亲亲</a> <a title="吓" type="qq"
                                                                     class="qqface qqface53">吓</a> <a title="可怜"
                                                                                                      type="qq"
                                                                                                      class="qqface qqface54">可怜</a>
              <a title="菜刀" type="qq" class="qqface qqface55">菜刀</a> <a title="西瓜" type="qq"
                                                                        class="qqface qqface56">西瓜</a> <a title="啤酒"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface57">啤酒</a>
              <a title="篮球" type="qq" class="qqface qqface58">篮球</a> <a title="乒乓" type="qq"
                                                                        class="qqface qqface59">乒乓</a> <a title="咖啡"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface60">咖啡</a>
              <a title="饭" type="qq" class="qqface qqface61">饭</a> <a title="猪头" type="qq"
                                                                      class="qqface qqface62">猪头</a>
              <a title="玫瑰" type="qq" class="qqface qqface63">玫瑰</a> <a title="凋谢" type="qq"
                                                                        class="qqface qqface64">凋谢</a> <a title="嘴唇"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface65">嘴唇</a>
              <a title="爱心" type="qq" class="qqface qqface66">爱心</a> <a title="心碎" type="qq"
                                                                        class="qqface qqface67">心碎</a> <a title="蛋糕"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface68">蛋糕</a>
              <a title="闪电" type="qq" class="qqface qqface69">闪电</a> <a title="炸弹" type="qq"
                                                                        class="qqface qqface70">炸弹</a> <a title="刀"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface71">刀</a>
              <a title="足球" type="qq" class="qqface qqface72">足球</a> <a title="瓢虫" type="qq"
                                                                        class="qqface qqface73">瓢虫</a> <a title="便便"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface74">便便</a>
              <a title="月亮" type="qq" class="qqface qqface75">月亮</a> <a title="太阳" type="qq"
                                                                        class="qqface qqface76">太阳</a> <a title="礼物"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface77">礼物</a>
              <a title="拥抱" type="qq" class="qqface qqface78">拥抱</a> <a title="强" type="qq"
                                                                        class="qqface qqface79">强</a>
              <a title="弱" type="qq" class="qqface qqface80">弱</a> <a title="握手" type="qq"
                                                                      class="qqface qqface81">握手</a>
              <a title="胜利" type="qq" class="qqface qqface82">胜利</a> <a title="抱拳" type="qq"
                                                                        class="qqface qqface83">抱拳</a> <a title="勾引"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface84">勾引</a>
              <a title="拳头" type="qq" class="qqface qqface85">拳头</a> <a title="差劲" type="qq"
                                                                        class="qqface qqface86">差劲</a> <a title="爱你"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface87">爱你</a>
              <a title="NO" type="qq" class="qqface qqface88">NO</a> <a title="OK" type="qq"
                                                                        class="qqface qqface89">OK</a> <a title="爱情"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface90">爱情</a>
              <a title="飞吻" type="qq" class="qqface qqface91">飞吻</a> <a title="跳跳" type="qq"
                                                                        class="qqface qqface92">跳跳</a> <a title="发抖"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface93">发抖</a>
              <a title="怄火" type="qq" class="qqface qqface94">怄火</a> <a title="转圈" type="qq"
                                                                        class="qqface qqface95">转圈</a> <a title="磕头"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface96">磕头</a>
              <a title="回头" type="qq" class="qqface qqface97">回头</a> <a title="跳绳" type="qq"
                                                                        class="qqface qqface98">跳绳</a> <a title="投降"
                                                                                                          type="qq"
                                                                                                          class="qqface qqface99">投降</a>
              <a title="激动" type="qq" class="qqface qqface100">激动</a> <a title="乱舞" type="qq"
                                                                         class="qqface qqface101">乱舞</a> <a
              title="献吻" type="qq" class="qqface qqface102">献吻</a> <a title="左太极" type="qq"
                                                                      class="qqface qqface103">左太极</a> <a
              title="右太极" type="qq" class="qqface qqface104">右太极</a>
            </div>
            <div class="exp_cont emoji_face" [class.active]="expHdItemNam == 2"></div>
            <div class="exp_cont tuzki_face" [class.active]="expHdItemNam == 3"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="bottombox" #box_ft_hd>
      <div class="iptbox">
        <ul class="iptleft">
          <li><img style="width:100%;height:100%;" src="././assets/imgs/work/2cop3.png" alt=""></li>
          <li class="ipttext">
            <pre #editArea style="line-height: 25px; margin-top: 0px;margin-bottom: 0px;height: 100%;"
                 contenteditable="true" (keyup)="changeMsg()" (click)="cliInput()"></pre>
          </li>
        </ul>
        <ul class="iptright">
          <li (click)="sendFile()" style="margin-left:10px;" [hidden]="myInput.length > 0">
            <img style="width:100%;height:100%;" src="././assets/imgs/work/2copy2.png" alt="">
          </li>
          <li style="position:relative;margin-left: 20px;" [hidden]="myInput.length == 0">
            <button class="fasong" (click)="sendMsg()" ion-button>发送</button>
          </li>
          <li (click)="cliWebWechatFace()">
            <img style="width:100%;height:100%;" src="././assets/imgs/work/xiao.png" alt="">
          </li>
        </ul>
      </div>
    </div>
  </ion-toolbar>
  <nav *ngIf="showSendFile">
    <ul class="clearfix tubiao">
      <li>
        <a href="javacript:;" [navPush]="OnlineElectivecourseListPage">
          <p><img src="./assets/imgs/home/gong1.png" alt=""/></p>
          <span>照片</span>
        </a>
      </li>
      <li>
        <a href="javacript:;" [navPush]="OnlineStudyListPage">
          <p><img src="./assets/imgs/home/gong2.png" alt=""/></p>
          <span>相机</span>
        </a>
      </li>
      <li>
        <a href="javacript:;" [navPush]="OnlineExamListPage" [navParams]="examParams">
          <p><img src="./assets/imgs/home/gong3.png" alt=""/></p>
          <span>视频</span>
        </a>
      </li>
      <li>
        <a href="javacript:;" [navPush]="OnlineExamListPage" [navParams]="exerciseParams">
          <p><img src="./assets/imgs/home/gong4.png" alt=""/></p>
          <span>文件</span>
        </a>
      </li>
      <li>
        <a href="javacript:;" [navPush]="ExamExercisesListPage">
          <p><img src="./assets/imgs/home/gong8.png" alt=""/></p>
          <span>语音输入</span>
        </a>
      </li>
      <li>
        <a href="javacript:;" [navPush]="StandardsTrainListPage">
          <p><img src="./assets/imgs/home/gong6.png" alt=""/></p>
          <span>名片</span>
        </a>
      </li>
      <li>
        <a href="javacript:;" [navPush]="QuestionnaireListPage">
          <p><img src="./assets/imgs/home/gong5.png" alt=""/></p>
          <span>位置</span>
        </a>
      </li>
    </ul>
  </nav>
</ion-footer>
